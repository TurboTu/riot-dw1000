<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CoAP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="riot-logo.png"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">DecaRange RTLS ARM Application</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CoAP</div>  </div>
</div><!--header-->
<div class="contents">

<p>High-level interface to CoAP messaging.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:gcoap_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcoap_8h.html">gcoap.h</a></td></tr>
<tr class="memdesc:gcoap_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">gcoap definition <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gcoap_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcoap_8c.html">gcoap.c</a></td></tr>
<tr class="memdesc:gcoap_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">GNRC's implementation of CoAP protocol. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgcoap__listener.html">gcoap_listener</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A modular collection of resources for a server.  <a href="structgcoap__listener.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgcoap__request__memo__t.html">gcoap_request_memo_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memo to handle a response for a request.  <a href="structgcoap__request__memo__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgcoap__state__t.html">gcoap_state_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Container for the state of gcoap itself.  <a href="structgcoap__state__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga19cc69567288f3b32b5896428fd3e585"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga19cc69567288f3b32b5896428fd3e585">GCOAP_MSG_QUEUE_SIZE</a>&#160;&#160;&#160;(4)</td></tr>
<tr class="memdesc:ga19cc69567288f3b32b5896428fd3e585"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size for module message queue.  <a href="#ga19cc69567288f3b32b5896428fd3e585">More...</a><br /></td></tr>
<tr class="separator:ga19cc69567288f3b32b5896428fd3e585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga734b3c7ab1ad7f00e609a8a1fa659deb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga734b3c7ab1ad7f00e609a8a1fa659deb">GCOAP_PORT</a>&#160;&#160;&#160;(5683)</td></tr>
<tr class="memdesc:ga734b3c7ab1ad7f00e609a8a1fa659deb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Server port; use RFC 7252 default if not defined.  <a href="#ga734b3c7ab1ad7f00e609a8a1fa659deb">More...</a><br /></td></tr>
<tr class="separator:ga734b3c7ab1ad7f00e609a8a1fa659deb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga575b90c3bf92e8a72b9411d21e167a4f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga575b90c3bf92e8a72b9411d21e167a4f">GCOAP_PDU_BUF_SIZE</a>&#160;&#160;&#160;(128)</td></tr>
<tr class="memdesc:ga575b90c3bf92e8a72b9411d21e167a4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the buffer used to build a CoAP request or response.  <a href="#ga575b90c3bf92e8a72b9411d21e167a4f">More...</a><br /></td></tr>
<tr class="separator:ga575b90c3bf92e8a72b9411d21e167a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga003e7dbb4a43663543387af44f267312"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga003e7dbb4a43663543387af44f267312">GCOAP_REQ_OPTIONS_BUF</a>&#160;&#160;&#160;(8)</td></tr>
<tr class="memdesc:ga003e7dbb4a43663543387af44f267312"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the buffer used to write options, other than Uri-Path, in a request.  <a href="#ga003e7dbb4a43663543387af44f267312">More...</a><br /></td></tr>
<tr class="separator:ga003e7dbb4a43663543387af44f267312"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cd60aed0bdc4cef9233c1ddeb6b3f3b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga2cd60aed0bdc4cef9233c1ddeb6b3f3b">GCOAP_RESP_OPTIONS_BUF</a>&#160;&#160;&#160;(8)</td></tr>
<tr class="memdesc:ga2cd60aed0bdc4cef9233c1ddeb6b3f3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the buffer used to write options in a response.  <a href="#ga2cd60aed0bdc4cef9233c1ddeb6b3f3b">More...</a><br /></td></tr>
<tr class="separator:ga2cd60aed0bdc4cef9233c1ddeb6b3f3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1479398f7f1bb59c72c5eb65e929e910"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga1479398f7f1bb59c72c5eb65e929e910">GCOAP_REQ_WAITING_MAX</a>&#160;&#160;&#160;(2)</td></tr>
<tr class="memdesc:ga1479398f7f1bb59c72c5eb65e929e910"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of requests awaiting a response.  <a href="#ga1479398f7f1bb59c72c5eb65e929e910">More...</a><br /></td></tr>
<tr class="separator:ga1479398f7f1bb59c72c5eb65e929e910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f4f23b08bfc7b5bbc578235b1b3ab0e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga2f4f23b08bfc7b5bbc578235b1b3ab0e">GCOAP_TOKENLEN_MAX</a>&#160;&#160;&#160;(8)</td></tr>
<tr class="memdesc:ga2f4f23b08bfc7b5bbc578235b1b3ab0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum length in bytes for a token.  <a href="#ga2f4f23b08bfc7b5bbc578235b1b3ab0e">More...</a><br /></td></tr>
<tr class="separator:ga2f4f23b08bfc7b5bbc578235b1b3ab0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga786670f21b2ced965003e06a68846e01"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga786670f21b2ced965003e06a68846e01">GCOAP_HEADER_MAXLEN</a>&#160;&#160;&#160;(sizeof(coap_hdr_t) + <a class="el" href="group__net__gcoap.html#ga2f4f23b08bfc7b5bbc578235b1b3ab0e">GCOAP_TOKENLEN_MAX</a>)</td></tr>
<tr class="memdesc:ga786670f21b2ced965003e06a68846e01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum length in bytes for a header, including the token.  <a href="#ga786670f21b2ced965003e06a68846e01">More...</a><br /></td></tr>
<tr class="separator:ga786670f21b2ced965003e06a68846e01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaddfe0ad1f4866092756eaf47c0cd6874"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#gaddfe0ad1f4866092756eaf47c0cd6874">GCOAP_TOKENLEN</a>&#160;&#160;&#160;(2)</td></tr>
<tr class="memdesc:gaddfe0ad1f4866092756eaf47c0cd6874"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length in bytes for a token; use 2 if not defined.  <a href="#gaddfe0ad1f4866092756eaf47c0cd6874">More...</a><br /></td></tr>
<tr class="separator:gaddfe0ad1f4866092756eaf47c0cd6874"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c1bb0c0f347c809b1bd168fbce65151"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga4c1bb0c0f347c809b1bd168fbce65151">GCOAP_PAYLOAD_MARKER</a>&#160;&#160;&#160;(0xFF)</td></tr>
<tr class="memdesc:ga4c1bb0c0f347c809b1bd168fbce65151"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks the boundary between header and payload.  <a href="#ga4c1bb0c0f347c809b1bd168fbce65151">More...</a><br /></td></tr>
<tr class="separator:ga4c1bb0c0f347c809b1bd168fbce65151"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8adb8e8025ccc3934c8d842a81d7f6b2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga8adb8e8025ccc3934c8d842a81d7f6b2">GCOAP_RECV_TIMEOUT</a>&#160;&#160;&#160;(1 * <a class="el" href="group__sys__timex.html#ga63a377676c26adf4e7f641f98c78fc13">US_PER_SEC</a>)</td></tr>
<tr class="memdesc:ga8adb8e8025ccc3934c8d842a81d7f6b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time in usec that the event loop waits for an incoming CoAP message.  <a href="#ga8adb8e8025ccc3934c8d842a81d7f6b2">More...</a><br /></td></tr>
<tr class="separator:ga8adb8e8025ccc3934c8d842a81d7f6b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3981f0eba211b77eacb4c7e336af5f31"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga3981f0eba211b77eacb4c7e336af5f31">GCOAP_NON_TIMEOUT</a>&#160;&#160;&#160;(5000000U)</td></tr>
<tr class="memdesc:ga3981f0eba211b77eacb4c7e336af5f31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default time to wait for a non-confirmable response, in usec.  <a href="#ga3981f0eba211b77eacb4c7e336af5f31">More...</a><br /></td></tr>
<tr class="separator:ga3981f0eba211b77eacb4c7e336af5f31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga645f19a99f4aee9acba621e8a036b37a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga645f19a99f4aee9acba621e8a036b37a">GCOAP_MSG_TYPE_TIMEOUT</a>&#160;&#160;&#160;(0x1501)</td></tr>
<tr class="memdesc:ga645f19a99f4aee9acba621e8a036b37a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identifies waiting timed out for a response to a sent message.  <a href="#ga645f19a99f4aee9acba621e8a036b37a">More...</a><br /></td></tr>
<tr class="separator:ga645f19a99f4aee9acba621e8a036b37a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c17b54a49d4d4c4e66e7ff478c72d7a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga8c17b54a49d4d4c4e66e7ff478c72d7a">GCOAP_MSG_TYPE_INTR</a>&#160;&#160;&#160;(0x1502)</td></tr>
<tr class="memdesc:ga8c17b54a49d4d4c4e66e7ff478c72d7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identifies a request to interrupt listening for an incoming message on a sock.  <a href="#ga8c17b54a49d4d4c4e66e7ff478c72d7a">More...</a><br /></td></tr>
<tr class="separator:ga8c17b54a49d4d4c4e66e7ff478c72d7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga3d9fa657acdc349dc2d16f97a4eef02e"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structgcoap__listener.html">gcoap_listener</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga3d9fa657acdc349dc2d16f97a4eef02e">gcoap_listener_t</a></td></tr>
<tr class="memdesc:ga3d9fa657acdc349dc2d16f97a4eef02e"><td class="mdescLeft">&#160;</td><td class="mdescRight">A modular collection of resources for a server.  <a href="#ga3d9fa657acdc349dc2d16f97a4eef02e">More...</a><br /></td></tr>
<tr class="separator:ga3d9fa657acdc349dc2d16f97a4eef02e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae396be3a2ac74a8f34448a37b0c50d4a"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#gae396be3a2ac74a8f34448a37b0c50d4a">gcoap_resp_handler_t</a>) (unsigned req_state, coap_pkt_t *pdu)</td></tr>
<tr class="memdesc:gae396be3a2ac74a8f34448a37b0c50d4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler function for a server response, including the state for the originating request.  <a href="#gae396be3a2ac74a8f34448a37b0c50d4a">More...</a><br /></td></tr>
<tr class="separator:gae396be3a2ac74a8f34448a37b0c50d4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae4fa464865a37f897cfab4d3e679bdb1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__core__util.html#ga8375139300d7cbf23bd8bd89ddddbe84">kernel_pid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#gae4fa464865a37f897cfab4d3e679bdb1">gcoap_init</a> (void)</td></tr>
<tr class="memdesc:gae4fa464865a37f897cfab4d3e679bdb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the gcoap thread and device.  <a href="#gae4fa464865a37f897cfab4d3e679bdb1">More...</a><br /></td></tr>
<tr class="separator:gae4fa464865a37f897cfab4d3e679bdb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c3b10922136af0308bd70c7bb6f0e52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga1c3b10922136af0308bd70c7bb6f0e52">gcoap_register_listener</a> (<a class="el" href="group__net__gcoap.html#ga3d9fa657acdc349dc2d16f97a4eef02e">gcoap_listener_t</a> *listener)</td></tr>
<tr class="memdesc:ga1c3b10922136af0308bd70c7bb6f0e52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts listening for resource paths.  <a href="#ga1c3b10922136af0308bd70c7bb6f0e52">More...</a><br /></td></tr>
<tr class="separator:ga1c3b10922136af0308bd70c7bb6f0e52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81014014218a02239f9c1978aa53c143"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga81014014218a02239f9c1978aa53c143">gcoap_req_init</a> (coap_pkt_t *pdu, uint8_t *buf, size_t <a class="el" href="multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>, unsigned code, char *path)</td></tr>
<tr class="memdesc:ga81014014218a02239f9c1978aa53c143"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a CoAP request PDU on a buffer.  <a href="#ga81014014218a02239f9c1978aa53c143">More...</a><br /></td></tr>
<tr class="separator:ga81014014218a02239f9c1978aa53c143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa39b51493945603cfde6d54a50b843a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cpu_2atmega__common_2include_2sys_2types_8h.html#af02a2e09430a9ed80bedb598467ce8d1">ssize_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#gaa39b51493945603cfde6d54a50b843a0">gcoap_finish</a> (coap_pkt_t *pdu, size_t payload_len, unsigned format)</td></tr>
<tr class="memdesc:gaa39b51493945603cfde6d54a50b843a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finishes formatting a CoAP PDU after the payload has been written.  <a href="#gaa39b51493945603cfde6d54a50b843a0">More...</a><br /></td></tr>
<tr class="separator:gaa39b51493945603cfde6d54a50b843a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0a49a4be47609f59091590894df2e1c3"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga0a49a4be47609f59091590894df2e1c3">gcoap_req_send2</a> (uint8_t *buf, size_t <a class="el" href="multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>, <a class="el" href="group__net__sock__udp.html#gaedc829c7973d7870c1ec078f9ffd45a1">sock_udp_ep_t</a> *remote, <a class="el" href="group__net__gcoap.html#gae396be3a2ac74a8f34448a37b0c50d4a">gcoap_resp_handler_t</a> resp_handler)</td></tr>
<tr class="memdesc:ga0a49a4be47609f59091590894df2e1c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a buffer containing a CoAP request to the provided endpoint.  <a href="#ga0a49a4be47609f59091590894df2e1c3">More...</a><br /></td></tr>
<tr class="separator:ga0a49a4be47609f59091590894df2e1c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadc17e9b4405f6dccc69e1fd6f6b16347"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#gadc17e9b4405f6dccc69e1fd6f6b16347">gcoap_req_send</a> (uint8_t *buf, size_t <a class="el" href="multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>, <a class="el" href="unionipv6__addr__t.html">ipv6_addr_t</a> *<a class="el" href="x86__ports_8h.html#ad5907c05bc1cbb4a164dc96ee0ee8225">addr</a>, uint16_t port, <a class="el" href="group__net__gcoap.html#gae396be3a2ac74a8f34448a37b0c50d4a">gcoap_resp_handler_t</a> resp_handler)</td></tr>
<tr class="memdesc:gadc17e9b4405f6dccc69e1fd6f6b16347"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a buffer containing a CoAP request to the provided host/port.  <a href="#gadc17e9b4405f6dccc69e1fd6f6b16347">More...</a><br /></td></tr>
<tr class="separator:gadc17e9b4405f6dccc69e1fd6f6b16347"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1900ec9205ee6844b422312a0af5896a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga1900ec9205ee6844b422312a0af5896a">gcoap_resp_init</a> (coap_pkt_t *pdu, uint8_t *buf, size_t <a class="el" href="multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>, unsigned code)</td></tr>
<tr class="memdesc:ga1900ec9205ee6844b422312a0af5896a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a CoAP response packet on a buffer.  <a href="#ga1900ec9205ee6844b422312a0af5896a">More...</a><br /></td></tr>
<tr class="separator:ga1900ec9205ee6844b422312a0af5896a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77442a4a2136fa497478e44cf2c3c08b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga77442a4a2136fa497478e44cf2c3c08b">gcoap_op_state</a> (uint8_t *open_reqs)</td></tr>
<tr class="memdesc:ga77442a4a2136fa497478e44cf2c3c08b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides important operational statistics.  <a href="#ga77442a4a2136fa497478e44cf2c3c08b">More...</a><br /></td></tr>
<tr class="separator:ga77442a4a2136fa497478e44cf2c3c08b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
States for the memo used to track waiting for a response</h2></td></tr>
<tr class="memitem:gae67f6e2e4ac7fc4ed2fd92a9e5450b38"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#gae67f6e2e4ac7fc4ed2fd92a9e5450b38">GCOAP_MEMO_UNUSED</a>&#160;&#160;&#160;(0)</td></tr>
<tr class="separator:gae67f6e2e4ac7fc4ed2fd92a9e5450b38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5c6eedf1d089acf408866a7510741d9b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga5c6eedf1d089acf408866a7510741d9b">GCOAP_MEMO_WAIT</a>&#160;&#160;&#160;(1)</td></tr>
<tr class="separator:ga5c6eedf1d089acf408866a7510741d9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ac030a4adb19a46fcf5ab50722b4365"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga6ac030a4adb19a46fcf5ab50722b4365">GCOAP_MEMO_RESP</a>&#160;&#160;&#160;(2)</td></tr>
<tr class="separator:ga6ac030a4adb19a46fcf5ab50722b4365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga94c3f5b193a7a264523b6064fb490047"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga94c3f5b193a7a264523b6064fb490047">GCOAP_MEMO_TIMEOUT</a>&#160;&#160;&#160;(3)</td></tr>
<tr class="separator:ga94c3f5b193a7a264523b6064fb490047"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3033a685118de6cb5e1e629a31b51dbb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gcoap.html#ga3033a685118de6cb5e1e629a31b51dbb">GCOAP_MEMO_ERR</a>&#160;&#160;&#160;(4)</td></tr>
<tr class="separator:ga3033a685118de6cb5e1e629a31b51dbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>High-level interface to CoAP messaging. </p>
<p>gcoap provides a high-level interface for writing CoAP messages via RIOT's sock networking API. gcoap internalizes network event processing so an application only needs to focus on request/response handling. For a server, gcoap accepts a list of resource paths with callbacks for writing the response. For a client, gcoap provides a function to send a request, with a callback for reading the server response. Generation of the request or response requires from one to three well-defined steps, depending on inclusion of a payload.</p>
<p>gcoap allocates a RIOT message processing thread, so a single instance can serve multiple applications. This approach also means gcoap uses a single UDP port, which supports RFC 6282 compression. Internally, gcoap depends on the nanocoap package for base level structs and functionality.</p>
<h2>Server Operation</h2>
<p>gcoap listens for requests on GCOAP_PORT, 5683 by default. You can redefine this by uncommenting the appropriate lines in gcoap's make file.</p>
<p>gcoap allows an application to specify a collection of request resource paths it wants to be notified about. Create an array of resources, coap_resource_t structs. Use <a class="el" href="group__net__gcoap.html#ga1c3b10922136af0308bd70c7bb6f0e52" title="Starts listening for resource paths. ">gcoap_register_listener()</a> at application startup to pass in these resources, wrapped in a gcoap_listener_t.</p>
<p>gcoap itself defines a resource for <code>/.well-known/core</code> discovery, which lists all of the registered paths.</p>
<h3>Creating a response</h3>
<p>An application resource includes a callback function, a coap_handler_t. After reading the request, the callback must use one or two functions provided by gcoap to format the response, as described below. The callback <em>must</em> read the request thoroughly before calling the functions, because the response buffer likely reuses the request buffer. See <code>examples/gcoap/gcoap_cli.c</code> for a simple example of a callback.</p>
<p>Here is the expected sequence for a callback function:</p>
<p>Read request completely and parse request payload, if any. Use the coap_pkt_t <em>payload</em> and <em>payload_len</em> attributes.</p>
<p>If there is a payload, follow the three steps below.</p>
<ol type="1">
<li>Call <a class="el" href="group__net__gcoap.html#ga1900ec9205ee6844b422312a0af5896a" title="Initializes a CoAP response packet on a buffer. ">gcoap_resp_init()</a> to initialize the response.</li>
<li>Write the request payload, starting at the updated <em>payload</em> pointer in the coap_pkt_t. If some error occurs, return a negative errno code from the handler, and gcoap will send a server error (5.00).</li>
<li>Call <a class="el" href="group__net__gcoap.html#gaa39b51493945603cfde6d54a50b843a0" title="Finishes formatting a CoAP PDU after the payload has been written. ">gcoap_finish()</a> to complete the PDU after writing the payload, and return the result. gcoap will send the message.</li>
</ol>
<p>If no payload, call only gcoap_response() to write the full response. Alternatively, you still can use <a class="el" href="group__net__gcoap.html#ga1900ec9205ee6844b422312a0af5896a" title="Initializes a CoAP response packet on a buffer. ">gcoap_resp_init()</a> and <a class="el" href="group__net__gcoap.html#gaa39b51493945603cfde6d54a50b843a0" title="Finishes formatting a CoAP PDU after the payload has been written. ">gcoap_finish()</a>, as described above. In fact, the gcoap_response() function is inline, and uses those two functions.</p>
<h2>Client Operation</h2>
<p>Client operation includes two phases: creating and sending a request, and handling the response aynchronously in a client supplied callback. See <code>examples/gcoap/gcoap_cli.c</code> for a simple example of sending a request and reading the response.</p>
<h3>Creating a request</h3>
<p>Here is the expected sequence for preparing and sending a request:</p>
<p>Allocate a buffer and a coap_pkt_t for the request.</p>
<p>If there is a payload, follow the three steps below.</p>
<ol type="1">
<li>Call <a class="el" href="group__net__gcoap.html#ga81014014218a02239f9c1978aa53c143" title="Initializes a CoAP request PDU on a buffer. ">gcoap_req_init()</a> to initialize the request.</li>
<li>Write the request payload, starting at the updated <em>payload</em> pointer in the coap_pkt_t.</li>
<li>Call <a class="el" href="group__net__gcoap.html#gaa39b51493945603cfde6d54a50b843a0" title="Finishes formatting a CoAP PDU after the payload has been written. ">gcoap_finish()</a>, which updates the packet for the payload.</li>
</ol>
<p>If no payload, call only gcoap_request() to write the full request. Alternatively, you still can use <a class="el" href="group__net__gcoap.html#ga81014014218a02239f9c1978aa53c143" title="Initializes a CoAP request PDU on a buffer. ">gcoap_req_init()</a> and <a class="el" href="group__net__gcoap.html#gaa39b51493945603cfde6d54a50b843a0" title="Finishes formatting a CoAP PDU after the payload has been written. ">gcoap_finish()</a>, as described above. The gcoap_request() function is inline, and uses those two functions.</p>
<p>Finally, call <a class="el" href="group__net__gcoap.html#ga0a49a4be47609f59091590894df2e1c3" title="Sends a buffer containing a CoAP request to the provided endpoint. ">gcoap_req_send2()</a> for the destination endpoint, as well as a callback function for the host's response.</p>
<h3>Handling the response</h3>
<p>When gcoap receives the response to a request, it executes the callback from the request. gcoap also executes the callback when a response is not received within GCOAP_RESPONSE_TIMEOUT.</p>
<p>Here is the expected sequence for handling a response in the callback.</p>
<ol type="1">
<li>Test for a server response or timeout in the <em>req_state</em> callback parameter. See the GCOAP_MEMO... constants.</li>
<li>Test the response with coap_get_code_class() and coap_get_code_detail().</li>
<li>Test the response payload with the coap_pkt_t <em>payload_len</em> and <em>content_type</em> attributes.</li>
<li>Read the payload, if any.</li>
</ol>
<h2>Implementation Notes</h2>
<h3>Building a packet</h3>
<p>The sequence and functions described above to build a request or response is designed to provide a relatively simple API for the user.</p>
<p>The structure of a CoAP PDU requires that options are placed between the header and the payload. So, gcoap provides space in the buffer for them in the request/response ...<a class="el" href="pseudoterm_8c.html#a05848de25ac2dbec233935058a1d24b4">init()</a> function, and then writes them during <a class="el" href="group__net__gcoap.html#gaa39b51493945603cfde6d54a50b843a0" title="Finishes formatting a CoAP PDU after the payload has been written. ">gcoap_finish()</a>. We trade some inefficiency/work in the buffer for simplicity in the API.</p>
<h3>Waiting for a response</h3>
<p>We take advantage of RIOT's asynchronous messaging by using an xtimer to wait for a response, so the gcoap thread does not block while waiting. The user is notified via the same callback, whether the message is received or the wait times out. We track the response with an entry in the <code>_coap_state.open_reqs</code> array. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga786670f21b2ced965003e06a68846e01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga786670f21b2ced965003e06a68846e01">&#9670;&nbsp;</a></span>GCOAP_HEADER_MAXLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_HEADER_MAXLEN&#160;&#160;&#160;(sizeof(coap_hdr_t) + <a class="el" href="group__net__gcoap.html#ga2f4f23b08bfc7b5bbc578235b1b3ab0e">GCOAP_TOKENLEN_MAX</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum length in bytes for a header, including the token. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00185">185</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga3033a685118de6cb5e1e629a31b51dbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3033a685118de6cb5e1e629a31b51dbb">&#9670;&nbsp;</a></span>GCOAP_MEMO_ERR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_MEMO_ERR&#160;&#160;&#160;(4)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Error processing response packet </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00203">203</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga6ac030a4adb19a46fcf5ab50722b4365"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6ac030a4adb19a46fcf5ab50722b4365">&#9670;&nbsp;</a></span>GCOAP_MEMO_RESP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_MEMO_RESP&#160;&#160;&#160;(2)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Got response </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00201">201</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga94c3f5b193a7a264523b6064fb490047"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga94c3f5b193a7a264523b6064fb490047">&#9670;&nbsp;</a></span>GCOAP_MEMO_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_MEMO_TIMEOUT&#160;&#160;&#160;(3)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Timeout waiting for response </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00202">202</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="gae67f6e2e4ac7fc4ed2fd92a9e5450b38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae67f6e2e4ac7fc4ed2fd92a9e5450b38">&#9670;&nbsp;</a></span>GCOAP_MEMO_UNUSED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_MEMO_UNUSED&#160;&#160;&#160;(0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This memo is unused </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00199">199</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga5c6eedf1d089acf408866a7510741d9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5c6eedf1d089acf408866a7510741d9b">&#9670;&nbsp;</a></span>GCOAP_MEMO_WAIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_MEMO_WAIT&#160;&#160;&#160;(1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request sent; awaiting response </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00200">200</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga19cc69567288f3b32b5896428fd3e585"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga19cc69567288f3b32b5896428fd3e585">&#9670;&nbsp;</a></span>GCOAP_MSG_QUEUE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_MSG_QUEUE_SIZE&#160;&#160;&#160;(4)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size for module message queue. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00153">153</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga8c17b54a49d4d4c4e66e7ff478c72d7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8c17b54a49d4d4c4e66e7ff478c72d7a">&#9670;&nbsp;</a></span>GCOAP_MSG_TYPE_INTR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_MSG_TYPE_INTR&#160;&#160;&#160;(0x1502)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identifies a request to interrupt listening for an incoming message on a sock. </p>
<p>Allows the event loop to process IPC messages. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00226">226</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga645f19a99f4aee9acba621e8a036b37a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga645f19a99f4aee9acba621e8a036b37a">&#9670;&nbsp;</a></span>GCOAP_MSG_TYPE_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_MSG_TYPE_TIMEOUT&#160;&#160;&#160;(0x1501)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identifies waiting timed out for a response to a sent message. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00218">218</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga3981f0eba211b77eacb4c7e336af5f31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3981f0eba211b77eacb4c7e336af5f31">&#9670;&nbsp;</a></span>GCOAP_NON_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_NON_TIMEOUT&#160;&#160;&#160;(5000000U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default time to wait for a non-confirmable response, in usec. </p>
<p>Set to 0 to disable timeout. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00215">215</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga4c1bb0c0f347c809b1bd168fbce65151"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4c1bb0c0f347c809b1bd168fbce65151">&#9670;&nbsp;</a></span>GCOAP_PAYLOAD_MARKER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_PAYLOAD_MARKER&#160;&#160;&#160;(0xFF)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks the boundary between header and payload. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00193">193</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga575b90c3bf92e8a72b9411d21e167a4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga575b90c3bf92e8a72b9411d21e167a4f">&#9670;&nbsp;</a></span>GCOAP_PDU_BUF_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_PDU_BUF_SIZE&#160;&#160;&#160;(128)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of the buffer used to build a CoAP request or response. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00161">161</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga734b3c7ab1ad7f00e609a8a1fa659deb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga734b3c7ab1ad7f00e609a8a1fa659deb">&#9670;&nbsp;</a></span>GCOAP_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_PORT&#160;&#160;&#160;(5683)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Server port; use RFC 7252 default if not defined. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00157">157</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga8adb8e8025ccc3934c8d842a81d7f6b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8adb8e8025ccc3934c8d842a81d7f6b2">&#9670;&nbsp;</a></span>GCOAP_RECV_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_RECV_TIMEOUT&#160;&#160;&#160;(1 * <a class="el" href="group__sys__timex.html#ga63a377676c26adf4e7f641f98c78fc13">US_PER_SEC</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Time in usec that the event loop waits for an incoming CoAP message. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00207">207</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga003e7dbb4a43663543387af44f267312"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga003e7dbb4a43663543387af44f267312">&#9670;&nbsp;</a></span>GCOAP_REQ_OPTIONS_BUF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_REQ_OPTIONS_BUF&#160;&#160;&#160;(8)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of the buffer used to write options, other than Uri-Path, in a request. </p>
<p>Accommodates Content-Format. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00169">169</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga1479398f7f1bb59c72c5eb65e929e910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1479398f7f1bb59c72c5eb65e929e910">&#9670;&nbsp;</a></span>GCOAP_REQ_WAITING_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_REQ_WAITING_MAX&#160;&#160;&#160;(2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of requests awaiting a response. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00179">179</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga2cd60aed0bdc4cef9233c1ddeb6b3f3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2cd60aed0bdc4cef9233c1ddeb6b3f3b">&#9670;&nbsp;</a></span>GCOAP_RESP_OPTIONS_BUF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_RESP_OPTIONS_BUF&#160;&#160;&#160;(8)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of the buffer used to write options in a response. </p>
<p>Accommodates Content-Format. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00176">176</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="gaddfe0ad1f4866092756eaf47c0cd6874"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaddfe0ad1f4866092756eaf47c0cd6874">&#9670;&nbsp;</a></span>GCOAP_TOKENLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_TOKENLEN&#160;&#160;&#160;(2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Length in bytes for a token; use 2 if not defined. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00189">189</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<a id="ga2f4f23b08bfc7b5bbc578235b1b3ab0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2f4f23b08bfc7b5bbc578235b1b3ab0e">&#9670;&nbsp;</a></span>GCOAP_TOKENLEN_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GCOAP_TOKENLEN_MAX&#160;&#160;&#160;(8)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum length in bytes for a token. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00182">182</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga3d9fa657acdc349dc2d16f97a4eef02e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3d9fa657acdc349dc2d16f97a4eef02e">&#9670;&nbsp;</a></span>gcoap_listener_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structgcoap__listener.html">gcoap_listener</a>  <a class="el" href="group__net__gcoap.html#ga3d9fa657acdc349dc2d16f97a4eef02e">gcoap_listener_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A modular collection of resources for a server. </p>

</div>
</div>
<a id="gae396be3a2ac74a8f34448a37b0c50d4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae396be3a2ac74a8f34448a37b0c50d4a">&#9670;&nbsp;</a></span>gcoap_resp_handler_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* gcoap_resp_handler_t) (unsigned req_state, coap_pkt_t *pdu)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handler function for a server response, including the state for the originating request. </p>
<p>If request timed out, the packet header is for the request. </p>

<p class="definition">Definition at line <a class="el" href="gcoap_8h_source.html#l00244">244</a> of file <a class="el" href="gcoap_8h_source.html">gcoap.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaa39b51493945603cfde6d54a50b843a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa39b51493945603cfde6d54a50b843a0">&#9670;&nbsp;</a></span>gcoap_finish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cpu_2atmega__common_2include_2sys_2types_8h.html#af02a2e09430a9ed80bedb598467ce8d1">ssize_t</a> gcoap_finish </td>
          <td>(</td>
          <td class="paramtype">coap_pkt_t *&#160;</td>
          <td class="paramname"><em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>payload_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>format</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finishes formatting a CoAP PDU after the payload has been written. </p>
<p>Assumes the PDU has been initialized with <a class="el" href="group__net__gcoap.html#ga81014014218a02239f9c1978aa53c143" title="Initializes a CoAP request PDU on a buffer. ">gcoap_req_init()</a> or <a class="el" href="group__net__gcoap.html#ga1900ec9205ee6844b422312a0af5896a" title="Initializes a CoAP response packet on a buffer. ">gcoap_resp_init()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pdu</td><td>Request metadata </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_len</td><td>Length of the payload, or 0 if none </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">format</td><td>Format code for the payload; use COAP_FORMAT_NONE if not specified</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size of the PDU </dd>
<dd>
&lt; 0 on error </dd></dl>

<p class="definition">Definition at line <a class="el" href="gcoap_8c_source.html#l00429">429</a> of file <a class="el" href="gcoap_8c_source.html">gcoap.c</a>.</p>

</div>
</div>
<a id="gae4fa464865a37f897cfab4d3e679bdb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae4fa464865a37f897cfab4d3e679bdb1">&#9670;&nbsp;</a></span>gcoap_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__core__util.html#ga8375139300d7cbf23bd8bd89ddddbe84">kernel_pid_t</a> gcoap_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the gcoap thread and device. </p>
<p>Must call once before first use.</p>
<dl class="section return"><dt>Returns</dt><dd>PID of the gcoap thread on success. </dd>
<dd>
-EEXIST, if thread already has been created. </dd>
<dd>
-EINVAL, if the IP port already is in use. </dd></dl>

<p class="definition">Definition at line <a class="el" href="gcoap_8c_source.html#l00364">364</a> of file <a class="el" href="gcoap_8c_source.html">gcoap.c</a>.</p>

</div>
</div>
<a id="ga77442a4a2136fa497478e44cf2c3c08b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga77442a4a2136fa497478e44cf2c3c08b">&#9670;&nbsp;</a></span>gcoap_op_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gcoap_op_state </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>open_reqs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Provides important operational statistics. </p>
<p>Useful for monitoring.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">open_reqs</td><td>Count of unanswered requests </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="gcoap_8c_source.html#l00518">518</a> of file <a class="el" href="gcoap_8c_source.html">gcoap.c</a>.</p>

</div>
</div>
<a id="ga1c3b10922136af0308bd70c7bb6f0e52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1c3b10922136af0308bd70c7bb6f0e52">&#9670;&nbsp;</a></span>gcoap_register_listener()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gcoap_register_listener </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__net__gcoap.html#ga3d9fa657acdc349dc2d16f97a4eef02e">gcoap_listener_t</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts listening for resource paths. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">listener</td><td>Listener containing the resources. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="gcoap_8c_source.html#l00380">380</a> of file <a class="el" href="gcoap_8c_source.html">gcoap.c</a>.</p>

</div>
</div>
<a id="ga81014014218a02239f9c1978aa53c143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga81014014218a02239f9c1978aa53c143">&#9670;&nbsp;</a></span>gcoap_req_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gcoap_req_init </td>
          <td>(</td>
          <td class="paramtype">coap_pkt_t *&#160;</td>
          <td class="paramname"><em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a CoAP request PDU on a buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pdu</td><td>Request metadata </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Buffer containing the PDU </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Length of the buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">code</td><td>Request code </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>Resource path</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
&lt; 0 on error </dd></dl>

<p class="definition">Definition at line <a class="el" href="gcoap_8c_source.html#l00391">391</a> of file <a class="el" href="gcoap_8c_source.html">gcoap.c</a>.</p>

</div>
</div>
<a id="gadc17e9b4405f6dccc69e1fd6f6b16347"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadc17e9b4405f6dccc69e1fd6f6b16347">&#9670;&nbsp;</a></span>gcoap_req_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t gcoap_req_send </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionipv6__addr__t.html">ipv6_addr_t</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__net__gcoap.html#gae396be3a2ac74a8f34448a37b0c50d4a">gcoap_resp_handler_t</a>&#160;</td>
          <td class="paramname"><em>resp_handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a buffer containing a CoAP request to the provided host/port. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000007">Deprecated:</a></b></dt><dd>Please use <a class="el" href="group__net__gcoap.html#ga0a49a4be47609f59091590894df2e1c3">gcoap_req_send2()</a> instead</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Buffer containing the PDU </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Length of the buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Destination for the packet </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td><a class="el" href="struct_port.html" title="PORT hardware registers. ">Port</a> at the destination </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">resp_handler</td><td>Callback when response received</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>length of the packet </dd>
<dd>
0 if cannot send </dd></dl>

<p class="definition">Definition at line <a class="el" href="gcoap_8c_source.html#l00439">439</a> of file <a class="el" href="gcoap_8c_source.html">gcoap.c</a>.</p>

</div>
</div>
<a id="ga0a49a4be47609f59091590894df2e1c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0a49a4be47609f59091590894df2e1c3">&#9670;&nbsp;</a></span>gcoap_req_send2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t gcoap_req_send2 </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__net__sock__udp.html#gaedc829c7973d7870c1ec078f9ffd45a1">sock_udp_ep_t</a> *&#160;</td>
          <td class="paramname"><em>remote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__net__gcoap.html#gae396be3a2ac74a8f34448a37b0c50d4a">gcoap_resp_handler_t</a>&#160;</td>
          <td class="paramname"><em>resp_handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a buffer containing a CoAP request to the provided endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Buffer containing the PDU </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Length of the buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">remote</td><td>Destination for the packet </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">resp_handler</td><td>Callback when response received</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>length of the packet </dd>
<dd>
0 if cannot send </dd></dl>

<p class="definition">Definition at line <a class="el" href="gcoap_8c_source.html#l00453">453</a> of file <a class="el" href="gcoap_8c_source.html">gcoap.c</a>.</p>

</div>
</div>
<a id="ga1900ec9205ee6844b422312a0af5896a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1900ec9205ee6844b422312a0af5896a">&#9670;&nbsp;</a></span>gcoap_resp_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gcoap_resp_init </td>
          <td>(</td>
          <td class="paramtype">coap_pkt_t *&#160;</td>
          <td class="paramname"><em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a CoAP response packet on a buffer. </p>
<p>Initializes payload location within the buffer based on packet setup.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pdu</td><td>Response metadata </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Buffer containing the PDU </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Length of the buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">code</td><td>Response code</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
&lt; 0 on error </dd></dl>

<p class="definition">Definition at line <a class="el" href="gcoap_8c_source.html#l00502">502</a> of file <a class="el" href="gcoap_8c_source.html">gcoap.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 15 2017 18:57:49 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
