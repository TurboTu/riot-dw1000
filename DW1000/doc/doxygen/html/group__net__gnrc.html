<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Generic (GNRC) network stack</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="riot-logo.png"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">DecaRange RTLS ARM Application</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Generic (GNRC) network stack</div>  </div>
</div><!--header-->
<div class="contents">

<p>RIOT's modular default IP network stack.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__net__gnrc__conn"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__conn.html">GNRC-specific implementation of the connection API</a></td></tr>
<tr class="memdesc:group__net__gnrc__conn"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides an implementation of the <a class="el" href="group__net__conn.html">Application connection API</a> by the <a class="el" href="group__net__gnrc.html">Generic (GNRC) network stack</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__ipv6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__ipv6.html">IPv6</a></td></tr>
<tr class="memdesc:group__net__gnrc__ipv6"><td class="mdescLeft">&#160;</td><td class="mdescRight">GNRC's IPv6 implementation. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__mac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__mac.html">Common MAC module</a></td></tr>
<tr class="memdesc:group__net__gnrc__mac"><td class="mdescLeft">&#160;</td><td class="mdescRight">A MAC module for providing common MAC parameters and helper functions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__netapi"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__netapi.html">GNRC communication interface</a></td></tr>
<tr class="memdesc:group__net__gnrc__netapi"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic interface for IPC communication between GNRC modules. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__netdev"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__netdev.html">Network device driver interface</a></td></tr>
<tr class="memdesc:group__net__gnrc__netdev"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common network device interface. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__netdev2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__netdev2.html">Adaption layer for GNRC on top of Netdev2</a></td></tr>
<tr class="memdesc:group__net__gnrc__netdev2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides the glue code for <a class="el" href="group__net__gnrc.html">Generic (GNRC) network stack</a> on top of <a class="el" href="group__drivers__netdev__netdev2.html">Generic Low-Level Network Driver Interface v2</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__netif"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__netif.html">Network interfaces</a></td></tr>
<tr class="memdesc:group__net__gnrc__netif"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abstraction layer for GNRC's network interfaces. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__netreg"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__netreg.html">Network protocol registry</a></td></tr>
<tr class="memdesc:group__net__gnrc__netreg"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registry to receive messages of a specified protocol type by GNRC. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__nettype"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__nettype.html">Protocol type</a></td></tr>
<tr class="memdesc:group__net__gnrc__nettype"><td class="mdescLeft">&#160;</td><td class="mdescRight">Protocol type definitions and helper functions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__nomac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__nomac.html">Simplest possible MAC layer</a></td></tr>
<tr class="memdesc:group__net__gnrc__nomac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simplest possible MAC protocol that sends without considering the state of the medium. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__pktbuf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__pktbuf.html">Packet buffer</a></td></tr>
<tr class="memdesc:group__net__gnrc__pktbuf"><td class="mdescLeft">&#160;</td><td class="mdescRight">A global network packet buffer. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__pktdump"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__pktdump.html">Dump Network Packets</a></td></tr>
<tr class="memdesc:group__net__gnrc__pktdump"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump network packets to STDOUT for debugging. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__pktqueue"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__pktqueue.html">Packet queue</a></td></tr>
<tr class="memdesc:group__net__gnrc__pktqueue"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group__net__gnrc__pkt.html#ga278e783e56a5ee6f1bd7b81077ed82a7">gnrc_pktsnip_t</a> queue <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__priority__pktqueue"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__priority__pktqueue.html">Priority packet queue for GNRC</a></td></tr>
<tr class="memdesc:group__net__gnrc__priority__pktqueue"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper for priority_queue that holds gnrc_pktsnip_t*. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__rpl"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__rpl.html">RPL</a></td></tr>
<tr class="memdesc:group__net__gnrc__rpl"><td class="mdescLeft">&#160;</td><td class="mdescRight">RPL implementation for GNRC. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__sixlowpan"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__sixlowpan.html">6LoWPAN</a></td></tr>
<tr class="memdesc:group__net__gnrc__sixlowpan"><td class="mdescLeft">&#160;</td><td class="mdescRight">GNRC's 6LoWPAN implementation. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__slip"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__slip.html">SLIP</a></td></tr>
<tr class="memdesc:group__net__gnrc__slip"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides a SLIP interface over UART utilizing <a class="el" href="group__drivers__periph__uart.html">UART</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__tcp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__tcp.html">TCP</a></td></tr>
<tr class="memdesc:group__net__gnrc__tcp"><td class="mdescLeft">&#160;</td><td class="mdescRight">RIOT's tcp implementation for the gnrc stack. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__tftp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__tftp.html">TFTP Support Library</a></td></tr>
<tr class="memdesc:group__net__gnrc__tftp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add's support for TFTP protocol parsing. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__udp"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__udp.html">UDP</a></td></tr>
<tr class="memdesc:group__net__gnrc__udp"><td class="mdescLeft">&#160;</td><td class="mdescRight">GNRC's implementation of the UDP protocol. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__zep"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__zep.html">Zigbee Encapsulation Protocol</a></td></tr>
<tr class="memdesc:group__net__gnrc__zep"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transports IEEE 802.15.4 frames over UDP (can be parsed by Wireshark) <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__net__gnrc__sock"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc__sock.html">GNRC-specific implementation of the sock API</a></td></tr>
<tr class="memdesc:group__net__gnrc__sock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides an implementation of the <a class="el" href="group__net__sock.html">Sock API</a> by the <a class="el" href="group__net__gnrc.html">Generic (GNRC) network stack</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:sys_2include_2net_2gnrc_2netdev2_2eth_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys_2include_2net_2gnrc_2netdev2_2eth_8h.html">eth.h</a></td></tr>
<tr class="memdesc:sys_2include_2net_2gnrc_2netdev2_2eth_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structnetdev2.html" title="Structure to hold driver state. ">netdev2</a> gnrc ethernet glue code interface <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:sys_2include_2net_2gnrc_2netdev2_2ieee802154_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sys_2include_2net_2gnrc_2netdev2_2ieee802154_8h.html">ieee802154.h</a></td></tr>
<tr class="memdesc:sys_2include_2net_2gnrc_2netdev2_2ieee802154_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structnetdev2.html" title="Structure to hold driver state. ">netdev2</a> gnrc IEEE 802.15.4 glue code interface <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:xbee__adpt_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xbee__adpt_8h.html">xbee_adpt.h</a></td></tr>
<tr class="memdesc:xbee__adpt_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">GNRC to XBee <a class="el" href="structnetdev2.html" title="Structure to hold driver state. ">netdev2</a> glue code interface. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gnrc_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gnrc_8h.html">gnrc.h</a></td></tr>
<tr class="memdesc:gnrc_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Includes all essential GNRC network stack base modules. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gnrc__netdev2__xbee_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gnrc__netdev2__xbee_8c.html">gnrc_netdev2_xbee.c</a></td></tr>
<tr class="memdesc:gnrc__netdev2__xbee_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">GNRC to netdev adapter for XBee devices. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gnrc__tcp_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gnrc__tcp_8c.html">gnrc_tcp.c</a></td></tr>
<tr class="memdesc:gnrc__tcp_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">GNRC's TCP implementation. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gnrc__tcp__eventloop_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gnrc__tcp__eventloop_8c.html">gnrc_tcp_eventloop.c</a></td></tr>
<tr class="memdesc:gnrc__tcp__eventloop_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">GNRC's TCP event processing loop. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gnrc__tcp__fsm_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gnrc__tcp__fsm_8c.html">gnrc_tcp_fsm.c</a></td></tr>
<tr class="memdesc:gnrc__tcp__fsm_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">GNRC's TCP finite state maschine. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gnrc__tcp__option_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gnrc__tcp__option_8c.html">gnrc_tcp_option.c</a></td></tr>
<tr class="memdesc:gnrc__tcp__option_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">GNRC's TCP option handling related functions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gnrc__tcp__pkt_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gnrc__tcp__pkt_8c.html">gnrc_tcp_pkt.c</a></td></tr>
<tr class="memdesc:gnrc__tcp__pkt_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">GNRC's TCP paket related functions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga69fab85ffa0375ade87329f188c2465a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__gnrc.html#ga69fab85ffa0375ade87329f188c2465a">gnrc_netdev2_xbee_init</a> (<a class="el" href="group__net__gnrc__netdev2.html#ga9cd8ed6cfa9e7828cd244cf4192efb39">gnrc_netdev2_t</a> *<a class="el" href="structgnrc__netdev2.html">gnrc_netdev2</a>, <a class="el" href="structxbee__t.html">xbee_t</a> *<a class="el" href="tests_2periph__spi_2main_8c.html#ad55ecfacc43495fef791d8c2eec7a002">dev</a>)</td></tr>
<tr class="memdesc:ga69fab85ffa0375ade87329f188c2465a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize GNRC handler for <a class="el" href="structnetdev2.html" title="Structure to hold driver state. ">netdev2</a> XBee devices.  <a href="#ga69fab85ffa0375ade87329f188c2465a">More...</a><br /></td></tr>
<tr class="separator:ga69fab85ffa0375ade87329f188c2465a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>RIOT's modular default IP network stack. </p>
<dl class="section see"><dt>See also</dt><dd><a href="http://doc.riot-os.org/mlenders_msc.pdf">Martine Lenders' master thesis</a> about GNRC's design and evaluation and the slide set of <a href="http://doc.riot-os.org/mlenders_msc_def.pdf">its defense</a>.</dd></dl>
<h1>About </h1>
<p>This module is currently the default network stack for RIOT and includes many components ranging from a <a class="el" href="group__net__gnrc__nomac.html">simple MAC protocol</a> through a fully-featured <a class="el" href="group__net__gnrc__ipv6.html">IPv6</a> implementation with <a class="el" href="group__net__gnrc__sixlowpan.html">6LowPAN</a> extensions to an <a class="el" href="group__net__gnrc__udp.html">UDP</a> implementation and <a class="el" href="group__net__gnrc__rpl.html">RPL</a>.</p>
<p>A list of all features contained in the <a class="el" href="group__net__gnrc.html">Generic (GNRC) network stack</a> is available in the <code>Modules</code> section above.</p>
<h1>Integration into RIOT </h1>
<p>From the application layer the <a class="el" href="group__net__gnrc.html">Generic (GNRC) network stack</a> can be accessed through the <a class="el" href="group__net__conn.html">Application connection API</a>, while the interface to the <a class="el" href="group__drivers__netdev__netdev2.html">Generic Low-Level Network Driver Interface v2</a> is defined by the <a class="el" href="group__net__gnrc__netdev2.html">Adaption layer for GNRC on top of Netdev2</a>.</p>
<h1>Architecture </h1>
<div class="image">
<object type="image/svg+xml" data="riot-gnrc.svg" alt="GNRC Network Stack"></object>
</div>
<p>Each layer of the network stack runs in its own thread and each lower layer thread has a higher priority than any upper layer thread. In this regard, the thread of the MAC layer implementation has the highest priority and threads on the application layer have the lowest priority. The communication between threads is handled by the kernel's <a class="el" href="group__core__msg.html">Messaging / IPC</a> functionality and by the <a class="el" href="group__net__gnrc__netapi.html">GNRC communication interface</a>. Most of the times IPC will take place between threads of neighboring layers for packets that traverse the network stack up or down.</p>
<p>Due to the design of <a class="el" href="group__net__gnrc.html">GNRC</a> and the nature of inter-process communication, it is crucial for a new module that introduces a new thread to follow a certain programming construct if it desires to interact with other threads without blocking the system: Utilizing an <code>event loop</code>.</p>
<p>Hence, a thread for <a class="el" href="group__net__gnrc.html">GNRC</a> will usually consist of four basic steps.</p>
<ol type="1">
<li>Initialize a message queue (note that its size <b>must</b> be a power of two, see <a class="el" href="group__core__msg.html#ga480e6f32c8ab18579b62a890f3fda2cd">msg_init_queue()</a>)</li>
<li>register for a <a class="el" href="group__net__gnrc__nettype.html">Protocol type</a></li>
<li>wait for a message</li>
<li>react appropriately to a message and return to 3.</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> *<a class="code" href="gnrc__zep_8c.html#add86f815521b99a4cd3855fc39ff6dd1">_event_loop</a>(<span class="keywordtype">void</span> *arg)</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <a class="code" href="structmsg__t.html">msg_t</a> _msg_q[Q_SZ];</div><div class="line">    (void)arg;</div><div class="line">    <a class="code" href="group__core__msg.html#ga480e6f32c8ab18579b62a890f3fda2cd">msg_init_queue</a>(_msg_q, Q_SZ);</div><div class="line">    <a class="code" href="structgnrc__netreg__entry.html">gnrc_netreg_entry</a> me_reg = <a class="code" href="group__net__gnrc__netreg.html#gaed56e891d9a47cba3dcf80f927623137">GNRC_NETREG_ENTRY_INIT_PID</a>(</div><div class="line">                                     <a class="code" href="group__net__gnrc__netreg.html#ga1a6359efa13b3bfed70af55deacde7ae">GNRC_NETREG_DEMUX_CTX_ALL</a>,</div><div class="line">                                     <a class="code" href="group__core__sched.html#ga4a646bb2ea6be02c6c4a554bf8778a69">sched_active_pid</a>);</div><div class="line">    <a class="code" href="group__net__gnrc__netreg.html#gafb6a9d0b840aae07c3c1617932835ef1">gnrc_netreg_register</a>(GNRC_NETTYPE_IPV6, &amp;me_reg);</div><div class="line">    <span class="keywordflow">while</span> (1) {</div><div class="line">        <a class="code" href="group__core__msg.html#gae3e05f08bd71d6f65dc727624c4d5f7a">msg_receive</a>(&amp;msg);</div><div class="line">        <span class="keywordflow">switch</span> (msg.type) {</div><div class="line">            <span class="keywordflow">case</span> TYPE1:</div><div class="line">                callback1();</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            ...</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="std_impl_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line">}</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>As an example have a look at the event loops of <a class="el" href="group__net__gnrc__ipv6.html">IPv6</a> and <a class="el" href="group__net__gnrc__rpl.html">RPL</a></dd></dl>
<h1>Receiving / Transmitting Packets </h1>
<p>Packets can be received or transmitted by interacting with the <a class="el" href="group__net__gnrc__netapi.html">GNRC communication interface</a>.</p>
<h2>Receiving Packets </h2>
<p>The reception of a <a class="el" href="group__net__gnrc__pkt.html">Packet</a> from another thread is handled by the <a class="el" href="group__net__gnrc__netapi.html">GNRC communication interface</a> module. In order to receive a <a class="el" href="group__net__gnrc__pkt.html">Packet</a> of a specific type, it is necessary to register for the appropriate <a class="el" href="group__net__gnrc__nettype.html">Protocol type</a> first. Your thread will then be able to receive certain commands defined in the <a class="el" href="group__net__gnrc__netapi.html">GNRC communication interface</a> module (e.g. <a class="el" href="group__net__gnrc__netapi.html#ga57b7e8cf32c12beecc9b84ca2cc073b5">net_gnrc_netapi::GNRC_NETAPI_MSG_TYPE_RCV</a>) for all <a class="el" href="group__net__gnrc__pkt.html">Packets</a> that your thread registered for.</p>
<p>The following example will sketch how to receive incoming and outgoing UDP traffic on port 80.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> *<a class="code" href="gnrc__zep_8c.html#add86f815521b99a4cd3855fc39ff6dd1">_event_loop</a>(<span class="keywordtype">void</span> *arg)</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <a class="code" href="structmsg__t.html">msg_t</a> _msg_q[Q_SZ];</div><div class="line">    <a class="code" href="structmsg__t.html">msg_t</a> msg, reply;</div><div class="line">    reply.<a class="code" href="structmsg__t.html#acb5cfd209ba75c853d03f701e7f91679">type</a> = <a class="code" href="group__net__gnrc__netapi.html#ga6edd8d8871394091cff19457fc3da1b5">GNRC_NETAPI_MSG_TYPE_ACK</a>;</div><div class="line">    reply.<a class="code" href="structmsg__t.html#ae0dd071afd4c761faee99d3ecd2bbb0d">content</a>.<a class="code" href="structmsg__t.html#ae7f66047e6e39ba2bb6af8b95f00d1dd">value</a> = -<a class="code" href="group__cpu__atmega__common.html#ga91457bbf35f0f1085619a99423bb1f33">ENOTSUP</a>;</div><div class="line">    <a class="code" href="group__core__msg.html#ga480e6f32c8ab18579b62a890f3fda2cd">msg_init_queue</a>(_msg_q, Q_SZ);</div><div class="line">    <a class="code" href="structgnrc__pktsnip.html">gnrc_pktsnip_t</a> *pkt = <a class="code" href="std_impl_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line">    <a class="code" href="structgnrc__netreg__entry.html">gnrc_netreg_entry</a> me_reg = { .<a class="code" href="structgnrc__netreg__entry.html#a141c70083c0077d485004dd041563249">demux_ctx</a> = 80, .pid = thread_getpid() };</div><div class="line">    <a class="code" href="group__net__gnrc__netreg.html#gafb6a9d0b840aae07c3c1617932835ef1">gnrc_netreg_register</a>(GNRC_NETTYPE_UDP, &amp;me_reg);</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span> (1) {</div><div class="line">        <a class="code" href="group__core__msg.html#gae3e05f08bd71d6f65dc727624c4d5f7a">msg_receive</a>(&amp;msg);</div><div class="line">        <span class="keywordflow">switch</span> (msg.<a class="code" href="structmsg__t.html#acb5cfd209ba75c853d03f701e7f91679">type</a>) {</div><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__net__gnrc__netapi.html#ga57b7e8cf32c12beecc9b84ca2cc073b5">GNRC_NETAPI_MSG_TYPE_RCV</a>:</div><div class="line">                pkt = msg.<a class="code" href="structmsg__t.html#ae0dd071afd4c761faee99d3ecd2bbb0d">content</a>.<a class="code" href="structmsg__t.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line">                _handle_incoming_pkt(pkt);</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__net__gnrc__netapi.html#gacf009a7a7aa95ec88848b1030ef08b09">GNRC_NETAPI_MSG_TYPE_SND</a>:</div><div class="line">                pkt = msg.<a class="code" href="structmsg__t.html#ae0dd071afd4c761faee99d3ecd2bbb0d">content</a>.<a class="code" href="structmsg__t.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line">                _handle_outgoing_pkt(pkt);</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">             <span class="keywordflow">case</span> <a class="code" href="group__net__gnrc__netapi.html#ga81e297b6dd96cf0a565a9dc77cc54e11">GNRC_NETAPI_MSG_TYPE_SET</a>:</div><div class="line">             <span class="keywordflow">case</span> <a class="code" href="group__net__gnrc__netapi.html#gacc19be168656448df4d274293dc23916">GNRC_NETAPI_MSG_TYPE_GET</a>:</div><div class="line">                <a class="code" href="group__core__msg.html#ga2e7b09dc269eb4847f6e08b9900ffda9">msg_reply</a>(&amp;msg, &amp;reply);</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            <span class="keywordflow">default</span>:</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="std_impl_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line">}</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>When receiving a message of type <a class="el" href="group__net__gnrc__netapi.html#ga81e297b6dd96cf0a565a9dc77cc54e11">GNRC_NETAPI_MSG_TYPE_SET</a> or <a class="el" href="group__net__gnrc__netapi.html#gacc19be168656448df4d274293dc23916">GNRC_NETAPI_MSG_TYPE_GET</a>, it is necessary to acknowledge it by calling <a class="el" href="group__core__msg.html#ga2e7b09dc269eb4847f6e08b9900ffda9">msg_reply()</a> with a message of type <a class="el" href="group__net__gnrc__netapi.html#ga6edd8d8871394091cff19457fc3da1b5">GNRC_NETAPI_MSG_TYPE_ACK</a> which contains the actual size of the GET message's content on success or an error code otherwise.</dd>
<dd>
Do not forget to unregister with <a class="el" href="group__net__gnrc__netreg.html#gad68b86ef84f5b1c6391067bdd8b16f2b">gnrc_netreg_unregister()</a> if you leave the function context</dd></dl>
<h2>Transmitting Packets </h2>
<p>A packet is transmitted by relaying it to threads interested in handling (and dispatching) packets of its type. To do this, the <a class="el" href="group__net__gnrc__netapi.html">GNRC communication interface</a> offers dispatch helper functions called gnrc_netapi_dispatch_send() and gnrc_netapi_dispatch_receive().</p>
<p>The following example sketches the usage and assumes a valid <a class="el" href="group__net__gnrc__pkt.html">Packet</a> named <code>pkt</code>.</p>
<div class="fragment"><div class="line"><a class="code" href="structgnrc__pktsnip.html">gnrc_pktsnip_t</a> *pkt;</div><div class="line"></div><div class="line">pkt = <a class="code" href="group__net__gnrc__pktbuf.html#ga0407cae9a01d0e57b2b5a8e3a17bac23">gnrc_pktbuf_add</a>(<a class="code" href="std_impl_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="x86__ports_8h.html#a5385f4658324b1ceebdd975b379e0b99">data</a>, <a class="code" href="multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>, <a class="code" href="group__net__gnrc__nettype.html#gga2582fbb16a318806983c225a69460902aadb666d279898cdecd1dcc0cc18799f1">GNRC_NETTYPE_UNDEF</a>);</div><div class="line"><span class="keywordflow">if</span> (pkt == <a class="code" href="std_impl_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line">     <a class="code" href="cpu_2native_2syscalls_8c.html#ad41876f99f190c7488e64ef39c50a23f">puts</a>(<span class="stringliteral">&quot;Error: unable to copy data to packet buffer\n&quot;</span>);</div><div class="line">     <span class="keywordflow">return</span>;</div><div class="line">}</div><div class="line"><span class="keywordflow">if</span> (!gnrc_netapi_dispatch_send(GNRC_NETTYPE_UDP, 80, pkt)) {</div><div class="line">     <a class="code" href="cpu_2native_2syscalls_8c.html#ad41876f99f190c7488e64ef39c50a23f">puts</a>(<span class="stringliteral">&quot;Error: no thread is interested&quot;</span>);</div><div class="line">     gnrc_pktbuf_release(pkt);</div><div class="line">     <span class="keywordflow">return</span>;</div><div class="line">}</div></div><!-- fragment --><p>First, the data to be sent is added to the <a class="el" href="group__net__gnrc__pktbuf.html">packet buffer</a>. This ensures its intactness during the sending process. After the data to be sent has been added to the packet buffer, its parent data structure can safely be freed or re-used.</p>
<p>Then, the <a class="el" href="group__net__gnrc__pkt.html">pkt</a> will be sent to all threads that registered for GNRC_NETTYPE_UDP and the demux context <code>80</code>. Every registered thread will receive a <a class="el" href="group__net__gnrc__netapi.html#gacf009a7a7aa95ec88848b1030ef08b09">GNRC_NETAPI_MSG_TYPE_SND</a> command and can access the <a class="el" href="group__net__gnrc__pkt.html">Packet</a>. Note that at this point, the threads receiving pkt act as its owners, so please don't modify pkt after calling any dispatch function.</p>
<p>If gnrc_netapi_dispatch_send() is replaced by gnrc_netapi_dispatch_receive() then threads will receive the <a class="el" href="group__net__gnrc__netapi.html#ga57b7e8cf32c12beecc9b84ca2cc073b5">GNRC_NETAPI_MSG_TYPE_RCV</a> command instead, again with access to the <a class="el" href="group__net__gnrc__pkt.html">Packet</a>.</p>
<dl class="section note"><dt>Note</dt><dd>If the data to be sent requires extra headers to be added for successful transmission (in the example, this would be IP and UDP headers), these have to be built manually before calling gnrc_netapi_dispatch_send(). In the interest of conciseness, this is omitted in this tutorial; please refer to <a class="el" href="group__net__gnrc__udp.html#ga262e6ffc6333255900f79329d9e445b9">gnrc_udp_hdr_build()</a>, <a class="el" href="group__net__gnrc__ipv6__hdr.html#gaf1cd3803edcb97066ec8b8ec19f4a2cb">gnrc_ipv6_hdr_build()</a> etc. for more information.</dd></dl>
<h1>How To Use </h1>
<p><a class="el" href="group__net__gnrc.html">Generic (GNRC) network stack</a> is highly modular and can be adjusted to include only the desired features. In the following several of the available modules will be stated that you can include in your application's Makefile.</p>
<ul>
<li>To include the default network device(s) on your board: <div class="fragment"><div class="line">USEMODULE += gnrc_netdev_default</div></div><!-- fragment --></li>
<li>To auto-initialize these network devices as GNRC network interfaces <div class="fragment"><div class="line">USEMODULE += auto_init_gnrc_netif</div></div><!-- fragment --></li>
<li>You may choose to build either as an IPv6 Node <div class="fragment"><div class="line">USEMODULE += gnrc_ipv6_default</div></div><!-- fragment --> or as an IPv6 Router <div class="fragment"><div class="line">USEMODULE += gnrc_ipv6_router_default</div></div><!-- fragment --> An IPv6 Router can forward packets, while an IPv6 Node will simply drop packets not targeted to it. If an IEEE 802.15.4 network device is present <a class="el" href="group__net__gnrc__sixlowpan.html">6LoWPAN</a> (with <a class="el" href="group__net__gnrc__sixlowpan__frag.html">6LoWPAN Fragmentation</a> and <a class="el" href="group__net__gnrc__sixlowpan__iphc.html">IPv6 header compression (IPHC)</a>) will be included automatically.</li>
<li>For basic IPv6 (and 6LoWPAN) functionalities choose instead <div class="fragment"><div class="line">USEMODULE += gnrc_ipv6</div></div><!-- fragment --> or <div class="fragment"><div class="line">USEMODULE += gnrc_ipv6_router</div></div><!-- fragment --> respectively. Those modules provide the bare minimum of IPv6 functionalities (no <a class="el" href="group__net__gnrc__icmpv6.html">ICMPv6</a>, no <a class="el" href="group__net__gnrc__ndp.html">IPv6 Neighbor discovery</a>). Because of that, the <a class="el" href="group__net__gnrc__ipv6__nc.html">IPv6 neighbor cache</a> needs to be configured manually. If an IEEE 802.15.4 device is present <a class="el" href="group__net__gnrc__sixlowpan.html">6LoWPAN</a> will be included automatically, but no fragmentation or header compression support will be provided.</li>
<li>For <a class="el" href="group__net__gnrc__icmpv6__echo.html">ICMPv6 echo request/reply (ping)</a> functionality: <div class="fragment"><div class="line">USEMODULE += gnrc_icmpv6_echo</div></div><!-- fragment --></li>
<li>For <a class="el" href="group__net__gnrc__udp.html">UDP</a> support include <div class="fragment"><div class="line">USEMODULE += gnrc_udp</div></div><!-- fragment --></li>
<li>To use <a class="el" href="group__net__conn__udp.html">UDP connections</a> with GNRC include <div class="fragment"><div class="line">USEMODULE += gnrc_conn_udp</div></div><!-- fragment --></li>
<li>To include the <a class="el" href="group__net__gnrc__rpl.html">RPL</a> module <div class="fragment"><div class="line">USEMODULE += gnrc_rpl</div></div><!-- fragment --> This will include the <a class="el" href="group__net__gnrc__rpl.html">RPL</a> module. To provide forwarding capabilities it is necessary to build the application with <code>gnrc_ipv6_router_default</code> (or <code>gnrc_ipv6_router</code>), not <code>gnrc_ipv6_default</code> (or <code>gnrc_ipv6</code>). </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga69fab85ffa0375ade87329f188c2465a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga69fab85ffa0375ade87329f188c2465a">&#9670;&nbsp;</a></span>gnrc_netdev2_xbee_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gnrc_netdev2_xbee_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__net__gnrc__netdev2.html#ga9cd8ed6cfa9e7828cd244cf4192efb39">gnrc_netdev2_t</a> *&#160;</td>
          <td class="paramname"><em>gnrc_netdev2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structxbee__t.html">xbee_t</a> *&#160;</td>
          <td class="paramname"><em>dev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize GNRC handler for <a class="el" href="structnetdev2.html" title="Structure to hold driver state. ">netdev2</a> XBee devices. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname"><a class="el" href="structgnrc__netdev2.html" title="Structure holding GNRC netdev2 adapter state. ">gnrc_netdev2</a></td><td><a class="el" href="structgnrc__netdev2.html" title="Structure holding GNRC netdev2 adapter state. ">gnrc_netdev2</a> struct to initialize </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>XBee device to handle </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="gnrc__netdev2__xbee_8c_source.html#l00175">175</a> of file <a class="el" href="gnrc__netdev2__xbee_8c_source.html">gnrc_netdev2_xbee.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 15 2017 18:57:50 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
