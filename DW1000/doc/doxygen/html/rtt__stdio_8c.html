<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sys/rtt_stdio/rtt_stdio.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="riot-logo.png"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">DecaRange RTLS ARM Application</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_a408b6d3a4a484720bc3ecfeac8947e3.html">sys</a></li><li class="navelem"><a class="el" href="dir_8c3c4c7558fbb1a7fb52516c26ddf43e.html">rtt_stdio</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rtt_stdio.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>SEGGER RTT stdio implementation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="stdio_8h_source.html">stdio.h</a>&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;<a class="el" href="rtt__stdio_8h_source.html">rtt_stdio.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="thread_8h_source.html">thread.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mutex_8h_source.html">mutex.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="xtimer_8h_source.html">xtimer.h</a>&quot;</code><br />
</div>
<p><a href="rtt__stdio_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrtt__ringbuf__t.html">rtt_ringbuf_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">SEGGER's ring buffer implementation.  <a href="structrtt__ringbuf__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsegger__rtt__cb__t.html">segger_rtt_cb_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">RTT control block which describes the number of buffers available as well as the configuration for each buffer. The struct definition is fixed, as it is expected by SEGGER's software.  <a href="structsegger__rtt__cb__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab34c3628323e726e9304cb9338fbc21c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtt__stdio_8c.html#ab34c3628323e726e9304cb9338fbc21c">STDIO_POLL_INTERVAL</a>&#160;&#160;&#160;50000U</td></tr>
<tr class="separator:ab34c3628323e726e9304cb9338fbc21c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3acffbd305ee72dcd4593c0d8af64a4f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtt__stdio_8c.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>(<a class="el" href="minstd_8c.html#a8d3c3518d793541417a4845125da1ae1">a</a>,  b)&#160;&#160;&#160;(((<a class="el" href="minstd_8c.html#a8d3c3518d793541417a4845125da1ae1">a</a>) &lt; (b)) ? (<a class="el" href="minstd_8c.html#a8d3c3518d793541417a4845125da1ae1">a</a>) : (b))</td></tr>
<tr class="separator:a3acffbd305ee72dcd4593c0d8af64a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa99ec4acc4ecb2dc3c2d05da15d0e3f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtt__stdio_8c.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(<a class="el" href="minstd_8c.html#a8d3c3518d793541417a4845125da1ae1">a</a>,  b)&#160;&#160;&#160;(((<a class="el" href="minstd_8c.html#a8d3c3518d793541417a4845125da1ae1">a</a>) &gt; (b)) ? (<a class="el" href="minstd_8c.html#a8d3c3518d793541417a4845125da1ae1">a</a>) : (b))</td></tr>
<tr class="separator:afa99ec4acc4ecb2dc3c2d05da15d0e3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3303ce9744afbc975c67c5985839ae6b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtt__stdio_8c.html#a3303ce9744afbc975c67c5985839ae6b">STDIO_TX_BUFSIZE</a>&#160;&#160;&#160;(512)</td></tr>
<tr class="separator:a3303ce9744afbc975c67c5985839ae6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0435de87ff46b82a46f4007b2a462237"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtt__stdio_8c.html#a0435de87ff46b82a46f4007b2a462237">STDIO_RX_BUFSIZE</a>&#160;&#160;&#160;(32)</td></tr>
<tr class="separator:a0435de87ff46b82a46f4007b2a462237"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1fe7b18073f66220843ce5db1543f238"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtt__stdio_8c.html#a1fe7b18073f66220843ce5db1543f238">rtt_write</a> (const char *buf_ptr, unsigned num_bytes)</td></tr>
<tr class="memdesc:a1fe7b18073f66220843ce5db1543f238"><td class="mdescLeft">&#160;</td><td class="mdescRight">write bytes to the up buffer. This function does not block. The logic here is unmodified from SEGGER's reference, it is just refactored to match code style. The string does not need to be null terminated.  <a href="#a1fe7b18073f66220843ce5db1543f238">More...</a><br /></td></tr>
<tr class="separator:a1fe7b18073f66220843ce5db1543f238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa0ce11c7a33e357fad61e542dfd9c7d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__rtt__stdio.html#gaa0ce11c7a33e357fad61e542dfd9c7d6">uart_stdio_init</a> (void)</td></tr>
<tr class="memdesc:gaa0ce11c7a33e357fad61e542dfd9c7d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize the module. This is a noop.  <a href="group__sys__rtt__stdio.html#gaa0ce11c7a33e357fad61e542dfd9c7d6">More...</a><br /></td></tr>
<tr class="separator:gaa0ce11c7a33e357fad61e542dfd9c7d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7cb3f47d0be69e650099c6ff6f14d50"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__rtt__stdio.html#gad7cb3f47d0be69e650099c6ff6f14d50">rtt_stdio_enable_stdin</a> (void)</td></tr>
<tr class="memdesc:gad7cb3f47d0be69e650099c6ff6f14d50"><td class="mdescLeft">&#160;</td><td class="mdescRight">enable stdin polling, at a power consumption cost. This is enabled by default unless RTT_STDIO_DISABLE_STDIN is defined.  <a href="group__sys__rtt__stdio.html#gad7cb3f47d0be69e650099c6ff6f14d50">More...</a><br /></td></tr>
<tr class="separator:gad7cb3f47d0be69e650099c6ff6f14d50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6998fb52a4714c7a449ced7e9a013b6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__rtt__stdio.html#ga6998fb52a4714c7a449ced7e9a013b6f">rtt_stdio_enable_blocking_stdout</a> (void)</td></tr>
<tr class="memdesc:ga6998fb52a4714c7a449ced7e9a013b6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">enable stdout blocking and free space polling. This must be done with caution because if there is no RTT client attached, all writes to stdout will block indefinitely. This can be enabled automatically by defining RTT_STDIO_ENABLE_BLOCKING_STDOUT  <a href="group__sys__rtt__stdio.html#ga6998fb52a4714c7a449ced7e9a013b6f">More...</a><br /></td></tr>
<tr class="separator:ga6998fb52a4714c7a449ced7e9a013b6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e2967f7afa00e43f5f6edf1f16f38d8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__rtt__stdio.html#ga5e2967f7afa00e43f5f6edf1f16f38d8">uart_stdio_read</a> (char *<a class="el" href="tests_2driver__sdcard__spi_2main_8c.html#a1870d2717147e1356f2eb4e5d5fa4a1c">buffer</a>, int <a class="el" href="tests_2xtimer__hang_2main_8c.html#a16ff2d8e15ade4948398b0aeb80124a8">count</a>)</td></tr>
<tr class="memdesc:ga5e2967f7afa00e43f5f6edf1f16f38d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">read <code>len</code> bytes from stdio uart into <code>buffer</code>  <a href="group__sys__rtt__stdio.html#ga5e2967f7afa00e43f5f6edf1f16f38d8">More...</a><br /></td></tr>
<tr class="separator:ga5e2967f7afa00e43f5f6edf1f16f38d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac92e7c3117f2a8398d4be7293259e022"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__rtt__stdio.html#gac92e7c3117f2a8398d4be7293259e022">uart_stdio_write</a> (const char *<a class="el" href="tests_2driver__sdcard__spi_2main_8c.html#a1870d2717147e1356f2eb4e5d5fa4a1c">buffer</a>, int <a class="el" href="multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>)</td></tr>
<tr class="memdesc:gac92e7c3117f2a8398d4be7293259e022"><td class="mdescLeft">&#160;</td><td class="mdescRight">write <code>len</code> bytes from <code>buffer</code> into uart  <a href="group__sys__rtt__stdio.html#gac92e7c3117f2a8398d4be7293259e022">More...</a><br /></td></tr>
<tr class="separator:gac92e7c3117f2a8398d4be7293259e022"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>SEGGER RTT stdio implementation. </p>
<p>This file implements UART read/write functions, but it is actually a virtual UART backed by a ringbuffer that complies with SEGGER RTT. It is designed to shadow uart_stdio that is used by newlib.</p>
<dl class="section author"><dt>Author</dt><dd>Michael Andersen <a href="#" onclick="location.href='mai'+'lto:'+'m.a'+'nd'+'ers'+'en'+'@cs'+'.b'+'erk'+'el'+'ey.'+'ed'+'u'; return false;">m.and<span style="display: none;">.nosp@m.</span>erse<span style="display: none;">.nosp@m.</span>n@cs.<span style="display: none;">.nosp@m.</span>berk<span style="display: none;">.nosp@m.</span>eley.<span style="display: none;">.nosp@m.</span>edu</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="rtt__stdio_8c_source.html">rtt_stdio.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afa99ec4acc4ecb2dc3c2d05da15d0e3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa99ec4acc4ecb2dc3c2d05da15d0e3f">&#9670;&nbsp;</a></span>MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="minstd_8c.html#a8d3c3518d793541417a4845125da1ae1">a</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(((<a class="el" href="minstd_8c.html#a8d3c3518d793541417a4845125da1ae1">a</a>) &gt; (b)) ? (<a class="el" href="minstd_8c.html#a8d3c3518d793541417a4845125da1ae1">a</a>) : (b))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rtt__stdio_8c_source.html#l00095">95</a> of file <a class="el" href="rtt__stdio_8c_source.html">rtt_stdio.c</a>.</p>

</div>
</div>
<a id="a3acffbd305ee72dcd4593c0d8af64a4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3acffbd305ee72dcd4593c0d8af64a4f">&#9670;&nbsp;</a></span>MIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="minstd_8c.html#a8d3c3518d793541417a4845125da1ae1">a</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(((<a class="el" href="minstd_8c.html#a8d3c3518d793541417a4845125da1ae1">a</a>) &lt; (b)) ? (<a class="el" href="minstd_8c.html#a8d3c3518d793541417a4845125da1ae1">a</a>) : (b))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rtt__stdio_8c_source.html#l00094">94</a> of file <a class="el" href="rtt__stdio_8c_source.html">rtt_stdio.c</a>.</p>

</div>
</div>
<a id="ab34c3628323e726e9304cb9338fbc21c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab34c3628323e726e9304cb9338fbc21c">&#9670;&nbsp;</a></span>STDIO_POLL_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STDIO_POLL_INTERVAL&#160;&#160;&#160;50000U</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rtt__stdio_8c_source.html#l00091">91</a> of file <a class="el" href="rtt__stdio_8c_source.html">rtt_stdio.c</a>.</p>

</div>
</div>
<a id="a0435de87ff46b82a46f4007b2a462237"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0435de87ff46b82a46f4007b2a462237">&#9670;&nbsp;</a></span>STDIO_RX_BUFSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STDIO_RX_BUFSIZE&#160;&#160;&#160;(32)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rtt__stdio_8c_source.html#l00102">102</a> of file <a class="el" href="rtt__stdio_8c_source.html">rtt_stdio.c</a>.</p>

</div>
</div>
<a id="a3303ce9744afbc975c67c5985839ae6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3303ce9744afbc975c67c5985839ae6b">&#9670;&nbsp;</a></span>STDIO_TX_BUFSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STDIO_TX_BUFSIZE&#160;&#160;&#160;(512)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rtt__stdio_8c_source.html#l00098">98</a> of file <a class="el" href="rtt__stdio_8c_source.html">rtt_stdio.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1fe7b18073f66220843ce5db1543f238"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fe7b18073f66220843ce5db1543f238">&#9670;&nbsp;</a></span>rtt_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rtt_write </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>num_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>write bytes to the up buffer. This function does not block. The logic here is unmodified from SEGGER's reference, it is just refactored to match code style. The string does not need to be null terminated. </p>
<dl class="section return"><dt>Returns</dt><dd>the number of bytes read </dd></dl>

<p class="definition">Definition at line <a class="el" href="rtt__stdio_8c_source.html#l00235">235</a> of file <a class="el" href="rtt__stdio_8c_source.html">rtt_stdio.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 15 2017 18:57:35 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
